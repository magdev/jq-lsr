!function(a){"use strict";var b="unlink",c="lsr-link",d="lsr-link-parent",e="lsr-warning",f="lsr-message",g=JSON.parse(localStorage.getItem("domainlist"))||[],h={},i=!1,j={unlink:function(b,e,f,g){e&&e.length&&!e.hasClass(d)&&e.addClass(d);var i=a('<span title="'+m(h.link_removed,g,f)+'"></span>').text(b.text());i.addClass(c),b.replaceWith(i)},remove:function(b,c,d,e){var g="";return h.content_removed&&(g=a("<div></div>"),g.addClass(f).text(m(h.content_removed,e,d))),c&&c.length?void c.replaceWith(g):void b.replaceWith(g)},marker:function(a,b){b&&b.length&&!b.hasClass(d)&&b.addClass(d),a.hasClass(c)||a.addClass(c)},confirm:function(a,b,c,d){a.off("click").on("click",function(a){a.preventDefault(),confirm(m(h.confirm,d,c))&&(window.location=c)})},warning:function(b,c,d,f){var g=a("<div></div>");c=c||b.closest("div"),g.addClass(e).text(m(h.warning,f,d)),c.not("has-"+e).addClass("has-"+e).prepend(g)}},k=function(b,c){a.get(b,{},function(a,d){var e=Math.round(Date.now()/1e3);localStorage.setItem("domainlist",JSON.stringify(a)),localStorage.setItem("last-update",e),g=a,c(a,e,b,d)},"json")},l=function(a){var b=localStorage.getItem("last-update")||null,c=0,d=Math.round(Date.now()/1e3);if("off"===a)return localStorage.getItem("domainlist")?!1:!0;if(!localStorage.getItem("domainlist"))return!0;if(!b)return!0;switch(a){case"hourly":c=3600;break;case"daily":c=86400;break;case"weekly":c=604800;break;case"monthly":c=2592e3}return d>=b+c?!0:!1},m=function(a,b,c){return a.replace("##domain##",b).replace("##url##",c)},n=function(a,b){return-1!==a.indexOf("."+b)||-1!==a.indexOf("//"+b)?(i&&console.log("Match found: Domain: "+b+", URL: "+a),!0):!1},o=function(b,c,d,e){var f=b.attr("href");return f?void(n(f,d)&&e(b,c,f,d)):void b.find("a,link").each(function(){o(a(this),b,d,e)})},p=function(a,b,c){i&&(console.log("Blacklist updated at "+new Date(1e3*b).toLocaleString()+" from "+c),console.log("List contains actually "+a.length+" domains"))},q=function(a,c,d,e){j[b]||(i&&console.log("Invalid filter-mode: "+b+", using default (unlink)"),b="unlink"),j[b](a,c,d,e)},r={domainlist:"https://cdn.rawgit.com/magdev/leistungsschutzgelderpresser/master/domains.json",updateInterval:"weekly",forceUpdate:!1,debug:!1,onFilterMatch:q,onUpdateList:p,filterMode:"unlink",parentSelector:null,elementClass:"lsr-link",parentClass:"lsr-link-parent",warningClass:"lsr-warning",messageClass:"lsr-message",lang:{link_removed:"Link removed",content_removed:"Content removed",warning:"WARNING! Contains LSR-related Links",confirm:"The link goes to ##domain##! Are you sure you want to follow this link?"}};a.fn.lsr=function(j){var m=a.extend(r,j);return b=m.filterMode,c=m.elementClass,d=m.parentClass,e=m.warningClass,f=m.messageClass,h=m.lang,i=m.debug,(l(m.updateInterval)||m.forceUpdate)&&k(m.domainlist,m.onUpdateList),this.each(function(){var b=a(this),c=a(this).closest(m.parentSelector);g.forEach(function(a){o(b,c,a,m.onFilterMatch)})})},a('[data-filter="lsr"]').each(function(){a(this).lsr(this.dataset)})}(jQuery);
//# sourceMappingURL=jquery.lsr.min.js.map